https://doi.org/10.48550/arXiv.2209.06006

# 背景
本文的主要背景概念是**语义通信**和**非正交多址接入（Non-Orthgonal Multiple Access，[NOMA](https://zhuanlan.zhihu.com/p/371993304)**）。

## NOMA的概念
NOMA是一种功率域复用方法，和其它常见的复用方式（时分、频分、码分、空分等）占用的不是同一个资源块，因此可以进一步提升频谱效率。

简而言之，NOMA的基本思路是把不同用户的信号按一定的权重直接相加并发送，这个过程称为[superposition coding](https://ecewireless.blogspot.com/2020/03/noma-graphical-example-of-superpostion.html)。在接收端从权重最高的用户开始，按权重从大到小的顺序恢复单个用户的信号，这个解除的过程称为successive interference cancellation，[SIC](https://ecewireless.blogspot.com/2020/04/noma-graphical-example-of-successive.html)。

## 传统NOMA存在的问题
传统比特通信的NOMA存在的难以解决的问题是：对于某一个用户而言，其之后SIC的所有用户的信号全都是干扰，可知第一个恢复的用户会受到最严重的干扰。为了减少前面用户的干扰，只能降低后面用户的功率权重，但这样一来后面用户的信噪比又会降低，通信质量受到影响，难以找到两全其美的方法。

一般来说，只有一个用户有较小的通信需求时，才能允许另一个用户同时接入。如果次用户通信需求小，那么对主用户的干扰就不是那么大；如果主用户通信需求小，那么可以容忍次用户的高水平干扰。所以传统的NOMA不可能允许两个用户同时具有很高的通信需求。

## 本文对传统NOMA的改进
如何解决上述问题？语义通信的一大优势就是可以在信噪比很低的情况下仍然有很好的效果。如果让后面的用户的数据使用语义通信来传输，就可以降低其功率，减少前面用户受到的干扰，并且自身的性能不会下降太多。

基于上面的思路，本文提出了一种两用户上行NOMA框架。主用户仍然使用传统比特通信，次用户则使用语义通信，使用[[学术/2 文献阅读/Deep Learning Enabled Semantic Communication Systems|DeepSC]]框架，传输内容是文本。在此基础之上，本文还提出一种机会主义方案，即根据信道的衰落状态，动态调整次用户的通信类型（语义或比特），通信时长，功率权重。

---

# 系统模型

## AWGN信道下的模型
![[figure/Pasted image 20221107163533.png]]
												图1 本文提出的NOMA框架

包三个含通信节点，均为单天线：
- N用户，为主用户，距离AP较近，使用比特通信；
- F用户，为次用户，距离AP较远，使用语义通信。
- AP，负责接收两个用户发来的信号。

### 数学模型
下面是比较复杂的数学模型建模过程。这一部分确定性能指标、性能界限和优化目标的表达式。

首先假定：
1. Perfect CSI
2. 输入符号的功率已归一化至单位功率

AP接收的信号 $y$ 可以表示为
$$y=\sqrt{p_{n}} x_{n}+\sqrt{p_{f}} x_{f}+z$$
其中 $p_{n} \in\left[0, P_{n}^{\max }\right]$ , $p_{f} \in\left[0, P_{f}^{\max }\right]$ 表示 N、F 用户各自采用的传输功率；$z$ 是均值为 0 , 方差为 $\sigma ^2$ 的高斯白噪声。

下面先求出各用户在各种条件下的性能极限表达式，以便之后用凸优化理论求解。

#### N用户的频谱效率
由于N用户的比特通信基于香农范式，极限信道容量由香农公式给出，因此也可以求得极限频谱效率。需要注意的是，本文为了充分探索该架构的性能，优化时都是对性能极限进行优化的，而非实际性能。

根据模型，F用户在一个时隙中只会在一部分时间内干扰N用户的通信，所以可以把一个时隙分成两段，第一段是N、F用户同时存在于信道中，第二段是只有N用户。下面分别计算这两段时期的频谱效率。

令 $\alpha_{f} \in \left[0,1\right]$ 表示F用户通信的持续时间比例，则在单位时间、单位带宽内，N、F用户同时传输时，N用户的频谱效率上限(bits/s/Hz)表示为
$$R_{1}=\alpha_{f} \log _{2}\left(1+\frac{p_{n}\left|{h}_{n}\right|^{2}}{p_{f}\left|h_{f}\right|^{2}+\sigma^{2}}\right)$$
其中 $h_n,h_f$ 表示信道系数。

当信道中只有N用户时，速率上限为
$$R_{2}=\left(1-\alpha_{f}\right) \log _{2}\left(1+\frac{p_{n}\left|h_{n}\right|^{2}}{\sigma^{2}}\right)$$

所以N用户总的信道容量为$R = R_{1}+ R_2$ 。

#### F用户的语义频谱效率
F用户使用的是语义通信，需要定义一个**语义频谱效率**用于衡量指标，单位为(susts/s/Hz)。semantic units (suts) 表示句子中的平均语义信息量。

>这个指标的定义引用了这篇文章中的方法：
>
>[1]L. Yan, Z. Qin, R. Zhang, Y. Li and G. Y. Li, "Resource Allocation for Text Semantic Communications," in IEEE Wireless Communications Letters, vol. 11, no. 7, pp. 1394-1398, July 2022, doi: 10.1109/LWC.2022.3170849.
>
>该方法给出了语义速率S-R及语义频谱效率S-SE的定量计算表达式，并且提供了传统指标到对应的语义指标的转化方式，以公平比较二者的效率。以后如果需要定量判别语义方法和传统方法的速率或效率，可以参考上面这篇文献。

本文中的S-SE(susts/s/Hz)定义为
$$\bar{S}=\frac{\alpha_{f} I}{K L} \varepsilon(K, \gamma)$$
其中各参数的说明：
- $\alpha_f$ 表示F用户传输占用总时隙的比例，无量纲。 
- $I$ 表示句子的平均语义信息量(susts/sentence)（[1]和本文中都没有给出具体的计算方法，susts是一个需要自己规定的基本量，但是可以把它看成是一个单位，不计算它的具体值并不会影响问题的优化）；
- $K$ 表示每个词映射成的语义符号的平均数量，本文中，单词到语义符号的映射由DeepSC完成，所以$K$ 值和语义网络本身有关；
- $L$ 表示一个句子的平均词数；
- $KL$ 就表示**每句话所对应的语义符号的平均数量**(semantic symbol/sentence)；
- $\frac{I}{KL}$ 就表示**每个语义符号所含的语义信息量**(susts/semantic symbol);
- $\gamma=\frac{p_{f}\left|h_{f}\right|^{2}}{\sigma^{2}}$ 为F用户的信噪比；
- $\varepsilon(K, \gamma)$ 表示语义相似度[1]，无量纲，它和语义网络的结构和信道的状态有关，没有具体的表达式，只能通过跑DeepSC模型得到一个映射表，这样难以优化。

需要注意的是，单位 ==susts/s/Hz== 是这么来的：式中的 $\frac{I}{KL}$ 单位是(susts/semantic symbol)，而在数字通信中，码元速率(symbol/s)**在数值上**等于信号带宽(Hz)，所以这里先乘以一个码元速率，然后除以一个带宽，值保持不变但单位发生变化，即 $S$ 的单位为
$$\mathbf{\frac{susts}{semantic symbol}\frac{semantic symbol}{s}\frac{1}{Hz} = susts/s/Hz}$$

为了解决没有闭合表达式的问题，作者用了一些统计的方法，用逻辑函数对具体的 $K$ 条件下的 $\varepsilon(K, \gamma)$ 做了拟合，给出了闭合表达式：
$$\varepsilon(K, \gamma) \approx \widetilde{\varepsilon}_{K}(\gamma) \triangleq A_{K, 1}+\frac{A_{K, 2}-A_{K, 1}}{1+e^{-\left(C_{K, 1} \gamma+C_{K, 2}\right)}}$$
其中 $A_{K,1},A_{K,2}$ 分别为下渐近线和上渐近线。$C_{K,1\gamma}$ 表示增长率，$C_{K,2}$ 控制中点。

Note：有时候如果一个函数没有闭合表达式，只要有数据，就可以直接用统计方法给出一个近似表达式。

然后就可以得到近似之后的S-SE：
$$S=\frac{\alpha_{f} I}{K L} \widetilde{\varepsilon}_{K}\left(\frac{p_{f}\left|h_{f}\right|^{2}}{\sigma^{2}}\right) \mathbf{1}\left(\widetilde{\varepsilon}_{K} \geq \bar{\varepsilon}\right)$$
其中 $\mathbf{1}\left(\widetilde{\varepsilon}_{K} \geq \bar{\varepsilon}\right)$ 指的是，当括号内表达式为真时，值为1，否则为0. $\bar{\varepsilon}$ 是一个最低的相似度需求，如果不能满足，就说明不能解码出有用的信息，则 $S=0$. 下面的实验假定这个条件始终满足。

#### 优化目标
知道了性能界限后，现在可以写出该模型能达到的SE范围：
$$\begin{array}{l}
\mathcal{R}_{\mathrm{SvB}}=\underset{p_{f} \in\left[0, P_{f}^{\max }\right], \alpha_{f} \in[0,1]}{ }\left\{(S, R): S \leq \frac{\alpha_{f} I}{K L} \widetilde{\varepsilon}_{K}\left(\frac{p_{f}\left|h_{f}\right|^{2}}{\sigma^{2}}\right) \mathbf{1}\left(\widetilde{\varepsilon}_{K} \geq \bar{\varepsilon}\right),\right. \\
\left.R \leq \alpha_{f} \log _{2}\left(1+\frac{P_{n}^{\max }\left|h_{n}\right|^{2}}{p_{f}\left|h_{f}\right|^{2}+\sigma^{2}}\right)+\left(1-\alpha_{f}\right) \log _{2}\left(1+\frac{P_{n}^{\max }\left|h_{n}\right|^{2}}{\sigma^{2}}\right)\right\},
\end{array}$$

最后得到优化目标：
$$\begin{aligned}
\max _{p_{f} \in\left[0, P_{f}^{\max }\right], \alpha_{f} \in[0,1]} & \frac{\alpha_{f} I}{K L} \widetilde{\varepsilon}_{K}\left(\frac{p_{f}\left|h_{f}\right|^{2}}{\sigma^{2}}\right) \mathbf{1}\left(\widetilde{\varepsilon}_{K} \geq \bar{\varepsilon}\right) \\
& \underline{\text { s.t. }} \alpha_{f} \log _{2}\left(1+\frac{P_{n}^{\max }\left|h_{n}\right|^{2}}{p_{f}\left|h_{f}\right|^{2}+\sigma^{2}}\right)+\left(1-\alpha_{f}\right) \log _{2}\left(1+\frac{P_{n}^{\max }\left|h_{n}\right|^{2}}{\sigma^{2}}\right) \geq \bar{R},
\end{aligned}$$
即，在满足**N用户（使用传统通信）的性能需求**的前提下，**最大化F用户（使用语义通信）的效率**。所以该优化问题是要**先保证N用户的性能大于需求的性能，再去提升F用户的语义性能**，有主次之分。

### 性能比较
为了定量比较F用户到底是用语义通信好还是传统通信好，需要一个统一的指标。本文提供了一种方法，可以把比特速率/频谱效率转换为语义速率/频谱效率，这样就可以使比特通信方法和语义通信方法相比较了。

下面来分析一下这种方法的合理性和公平性。首先写出之前定义的S-SE：
$$\bar{S}=\frac{\alpha_{f} I}{K L} \varepsilon(K, \gamma)$$

对比码率转换成的S-SE：
$$S^{\mathrm{B}}= \frac{R^{\mathrm{B}}I}{\mu L} \varepsilon_{C}$$
其中各符号的说明：

|符号|单位|说明|
|:----:|:----:|:----|
|$\varepsilon_C$|无|使用比特传输的句子达成的相似度，用的评价方法和语义通信的一样|
|$R^{\mathrm{B}}$|bit/s/Hz|比特通信的频谱效率，$R^{\mathrm{B}}=\alpha_{f} \log _{2}\left(1+\frac{p_{f}\vert h_{f}\vert^{2}}{\sigma^{2}}\right)$|
|$\mu$|bit/word|一个词包含的平均比特数|

对比上两式的区别，我们发现可以对应起来的不一样的地方是 $K$ 和 $\frac{\mu}{R^{\mathrm{B}}}$ ，除了这里之外其它地方的单位都一样。现在分别对比这两个值的单位：
- 已知 $K$ 的单位是(semantic symbol/word)；
- $R^{\mathrm{B}}$ 为对应比特通信的SE(bit/s/Hz)，将其乘以带宽并除以码率，值不变的同时单位变为(bit/symbol)，而 $\mu$ 的单位是(bit/word)，因此 $\frac{\mu}{R^{\mathrm{B}}}$ 的单位是(symbol/word)。

对比(semantic symbol/word)和(symbol/word)就可以发现，这个转换方法本质上是**直接把传统通信的码元symbol看作语义通信的码元semantic symbol**。通常来说，传统通信的一个码元所含的语义信息量不如DeepSC的语义符号，这也能解释为什么语义通信有潜力超越传统通信。

### 数据结果
![[学术/1 附件/Pasted image 20221031095010.png]]
图2 传统NOMA和本文提出的NOMA的比较

图中蓝色线表示传统NOMA（传统NOMA的F用户也是用比特通信，但转换为语义速率以进行比较），红色线表示本文提出的语义NOMA。可见在N用户比特率相同的情况下，本文提出的方法可以让F用户达成更好的效果。在F用户功率更大的情况下，其语义效率能达到的上限会更高，此时传统NOMA会超过语义NOMA，因此应用该语义NOMA的架构时应该限制F用户功率来达到最佳效果。

---

## 衰落信道下的模型
![[学术/1 附件/Pasted image 20221031162031.png]]
图3

该模型中的对象和之前一样，都是N、F两个用户和AP。不同的是，这里根据衰落信道的状态 $v$ 来**动态地**调整F用户的通信策略（使用比特通信或语义通信）以及其它一些可变参数，比如占用时隙的比例，发射功率等。作者称其为**机会主义的语义/比特通信方案**。


### 数学模型
和基础的模型相比，多了一个衰落状态的变量和一些动态控制的机制。

#### N用户的效率
之前我们已经写出N用户的效率 $R$ 的表达式。而在[准静态块衰落信道](https://blog.csdn.net/weixin_43871127/article/details/104929492)中，信道系数 $h_n,h_f$ 会随着衰落状态 $v$ 的变化而变化，由此动态调整功率 $p(v)$ 和时间占比 $\alpha(v)$，所以$R$ 也随着 $v$ 变化，表示为
$$R(v)=\alpha(v) \log _{2}\left(1+\frac{P_{n}\left|h_{n}(v)\right|^{2}}{p(v)\left|h_{f}(v)\right|^{2}+\sigma^{2}}\right)+(1-\alpha(v)) \log _{2}\left(1+\frac{P_{n}\left|h_{n}(v)\right|^{2}}{\sigma^{2}}\right)$$

#### F用户的效率
$\rho(v)\in\{0,1\}$ 是一个开关函数，为1时对F用户采用语义通信策略，为0时对F用户采用比特通信策略。故F用户的语义速率表示为
$$S(v)=\alpha(v)\left\{\rho(v) S_{s}(v)+(1-\rho(v)) S_{b}(v)\right\}$$

其中 $S_{s}(v)=\frac{I}{K L} \widetilde{\varepsilon}_{K}\left(\frac{p(v)\left|h_{f}(v)\right|^{2}}{\sigma^{2}}\right)$ 是采用语义通信策略时的S-SE，$S_{b}(v)=\frac{I}{\mu L} \log _{2}\left(1+\frac{p(v)\left|h_{f}(v)\right|^{2}}{\sigma^{2}}\right)$ 是采用比特通信策略时的SE。

### 两种场景
本文给出了两种不同的场景，在功率控制和时间规划上的方法侧重点不同。场景一侧重简单性，场景二侧重灵活性。

#### 场景一：开关功率控制和时间规划
![[学术/1 附件/Pasted image 20221101091512.png]]
图4 (a)

每个时隙里，F用户只有**发送/不发送，使用比特通信/传统通信**这三种可能，并且如果选择发送，发送的时间是整个时隙，发送的功率是固定值。
$$\mathcal{F}_{1}=\left\{\alpha(v) \in\{0,1\}, p(v) \in\left\{0, P_{0}\right\}, \forall v\right\},$$

该场景优点是简单且易于实现，但不能根据衰落状态连续调整参数，灵活性欠佳。

#### 场景二：连续功率控制和时间规划
![[学术/1 附件/Pasted image 20221101093555.png]]
图4 (b)

和场景一的区别在于，时间、功率控制是连续的。
$$\mathcal{F}_{2}=\left\{0 \leq \alpha(v) \leq 1, p(v) \leq \widehat{P}, \mathbb{E}_{v}[\alpha(v) p(v)] \leq \bar{P}, \forall v\right\}$$

优缺点刚好和场景一相反，灵活但复杂。

余下的部分是针对目标优化函数的凸优化算法，公式比较复杂，目前看不懂，先略

---
# 实验结果

## 场景一
![[学术/1 附件/Pasted image 20221101104032.png]]
图5 F用户的语义效率-F用户的传输功率限制

图中的 $\bar R$ 表示N用户的最低要求。

![[学术/1 附件/Pasted image 20221101104046.png]]
图6 F用户的语义效率-N用户的比特效率需求

图5、6中可以总结出如下结论：
1. 在相同功率下，本文提出的方法总是能优于全使用语义通信和传统通信的方法。
2. 当主用户的需求较低时，F用户的功率越大，则其语义效率越高；主用户需求高时，F用户的功率越大，其语义效率反而越低。
3. F用户采用大的发射功率时，虽然能达到的语义效率的上限更高（信噪比更高了），但是如果此时N用户的最低要求稍微高一些，语义效率就会快速下降（因为为了不干扰N用户，F用户在更多的衰落状态下选择不发送信息）。反之，当F用户采用小的发射功率时，虽然上限没有那么高，但对于N用户的需求更加宽松，只有当N用户的要求较高时，才会开始出现明显的下降趋势。

![[学术/1 附件/Pasted image 20221101102415.png]]
图7 F用户在几种情况下，各通信成分的占比

图中 $P_{0}$ 表示F用户的发射功率。

上图也印证了之前的结论：
- N用户的要求高时，为了不干扰到N用户，F用户会更多地选择不发送。
- 发射功率低时，F用户会更多地选择发送，并且偏好使用语义通信，因为语义通信正适合在低信噪比下工作。

## 场景二
![[学术/1 附件/Pasted image 20221101104009.png]]
图8 F用户的语义效率-N用户的比特效率需求

图中 $\bar P$ 表示F用户的最大平均发射功率，满足 $\mathbb{E}_{v}[\alpha(v) p(v)] \leq \bar{P}$ 。即在所有衰落状态 $v$ 下，F用户的发送持续时间占比与发射功率的乘积的均值。$\widehat{P}$ 表示F用户的最大发射功率，满足 $0 \leq p(v) \leq \widehat{P}$ 。

可以总结如下结论：
1. 和场景一相比性能更好
2. 本文提出的方案在N用户高需求的情况下效果非常显著，远超传统NOMA
3. 只使用语义通信的方案在N用户高需求的情况下和本文提出的方案性能接近
4. 在场景二下，更高的发射功率会有更好的效果

![[学术/1 附件/Pasted image 20221101160020.png]]
图9 F用户的语义效率-F用户的平均功率限制（APC）

图中 $\bar R$ 表示N用户的最低需求。

可总结出如下结论：
1. 当N用户需求较低时，允许F用户通过提升发射功率来增强性能，所以曲线会随着APC的增大而增长。反之，当N用户需求较高时，F用户总是只能以低的发射功率传输，所以无论APC多高，曲线都没有什么变化（因为APC只是一个上限值，实际的平均功率还是取决于本文提出的各种控制方法）。
2. N用户需求低时，在功率限制较高的情况下，比特通信会优于语义通信。这是因为，此时F用户可以以较高的发射功率传输，意味着F用户可以获得高的信噪比。而高信噪比的条件下，传统通信的句子相似度可以达到百分之百，语义通信则不能。
3. 本文提出的机会主义方案吸取了语义通信和传统通信的优点，并且进行了最优化，因此能在本文考虑的所有条件下达到最好的效果。

## 场景一和场景二的比较

![[学术/1 附件/Pasted image 20221101183132.png]]
图10 不同场景下，F用户的语义效率-N用户的比特效率需求

通过比较**连续/开关功率控制**和**连续/开关时间规划**四种不同的策略，可以得出如下结论：
1. 时间规划带来的性能增强几乎可以忽略不计，尤其是已经有连续功率控制的情况，完全不能带来任何增强。
2. 功率控制带来的性能增强非常显著。因此，兼顾灵活性与优点的最佳方案应该是采用**连续功率控制和开关时间规划**。
3. 从给出的结果图来计算，假设给定带宽为100MHz，那么在N用户可达到900Mbit/s的时候，F用户仍然可以达到约$18M\times \frac{I}{L}$ suts/s 的传输速率，也就是每秒传输18M个词。如果平均每个词40bit，那么就是720bit/s，约为N用户的80%，可见效果非常好。

---

# 总结和思考

本文同时吸取了比特通信和语义通信的优点，既利用比特通信在高信噪比和良好信道条件下的高准确率，也利用语义通信在低信噪比和较差信道条件下的高抗干扰能力，并且在NOMA场景中将二者结合，使之能够使用同一个资源块传输两个用户的信息，进一步提高效率。

之前曾讨论过，纯粹的数据传输业务是不能被语义通信取代的，因为仍然有许多业务（比如文件传输，安全验证）没有可以提取的语义信息，需要一字不差地传送比特数据，这只能用传统通信来做。所以必须找到一种架构，能让语义通信和传统通信可以很好地结合起来。我认为本文提出的方法也许是一种很好的思路，在同一个信道里让N用户走数据传输，让F用户走语义通信，兼顾二者的优点。

本文的研究灵感也能带来一些启发。因为语义通信在糟糕的信道条件下具有优越的性能，所以只要有场景存在和发射功率受限、干扰太强等情况，都可以考虑上语义通信。另外，传统通信仍然有不可替代的优点和作用，因此今后的语义通信系统架构的设计都应该考虑如何很好地与传统通信结合的问题。